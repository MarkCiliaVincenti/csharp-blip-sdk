{
    "identifier": "testesimples1",
    "accessKey": "c1BRaWpQcmpaSTl0N25hWTZsVVA=",
    "hostName": "hmg-tcp.msging.net",
    "port": 443,
    "messageReceivers": [
        {
            "type": "BuilderMessageReceiver"
        }
    ],
    "notificationReceivers": [
        {
            "type": "BuilderDeskNotificationReceiver"
        }
    ],
    "serviceProviderType": "BuilderServiceProvider",
    "settings": {
        "flow": {
            "id": "20abda05-6a5c-43b2-a14b-614dd0c9c7b9",
            "states": [
                {
                    "id": "onboarding",
                    "root": true,
                    "name": "Início",
                    "inputActions": [],
                    "input": {
                        "bypass": false
                    },
                    "outputActions": [],
                    "outputs": [
                        {
                            "stateId": "welcome",
                            "conditions": [
                                {
                                    "source": "input",
                                    "comparison": "matches",
                                    "values": [
                                        ".*"
                                    ]
                                }
                            ]
                        },
                        {
                            "stateId": "fallback"
                        }
                    ]
                },
                {
                    "id": "fallback",
                    "name": "Exceções",
                    "inputActions": [],
                    "input": {
                        "bypass": true
                    },
                    "outputActions": [],
                    "outputs": [
                        {
                            "stateId": "error",
                            "conditions": [
                                {
                                    "source": "input",
                                    "comparison": "matches",
                                    "values": [
                                        ".*"
                                    ]
                                }
                            ]
                        },
                        {
                            "stateId": "onboarding"
                        }
                    ]
                },
                {
                    "id": "welcome",
                    "name": "Boas vindas",
                    "inputActions": [
                        {
                            "type": "SendMessage",
                            "settings": {
                                "id": "00000000-0000-0000-0000-000000000001",
                                "type": "text/plain",
                                "content": "Olá! {{contact.name}}!\nSeja bem-vindo(a)!\n\nQual assunto, você deseja trata?",
                                "metadata": {
                                    "#stateName": "{{state.name}}",
                                    "#stateId": "{{state.id}}",
                                    "#messageId": "{{input.message@id}}",
                                    "#previousStateId": "{{state.previous.id}}",
                                    "#previousStateName": "{{state.previous.name}}"
                                }
                            }
                        }
                    ],
                    "input": {
                        "bypass": false,
                        "variable": "assunto"
                    },
                    "outputActions": [
                        {
                            "type": "ExecuteScript",
                            "settings": {
                                "function": "run",
                                "source": "/**\n            * All input variables needs to be passed as function param;\n            * Objects received as param needs to be parsed. Ex.: JSON.parse(inputVariable1);\n            * Objects returned needs to be stringfied. Ex.: JSON.stringify(inputVariable1);\n            **/\n            function run(assunto) {\n                return JSON.parse(assunto); \n            }",
                                "inputVariables": [
                                    "assunto"
                                ],
                                "outputVariable": "resultado"
                            },
                            "continueOnError": true,
                            "conditions": []
                        }
                    ],
                    "outputs": [
                        {
                            "stateId": "b4d0c77b-8bc9-43c8-988b-0f9c9521d810",
                            "conditions": [
                                {
                                    "source": "input",
                                    "comparison": "exists",
                                    "values": []
                                }
                            ]
                        },
                        {
                            "stateId": "fallback"
                        }
                    ]
                },
                {
                    "id": "error",
                    "name": "Erro padrão",
                    "inputActions": [
                        {
                            "type": "SendMessage",
                            "settings": {
                                "id": "00000000-0000-0000-0000-000000000002",
                                "type": "application/vnd.lime.chatstate+json",
                                "content": {
                                    "state": "composing",
                                    "interval": 1000
                                },
                                "metadata": {
                                    "#stateName": "{{state.name}}",
                                    "#stateId": "{{state.id}}",
                                    "#messageId": "{{input.message@id}}",
                                    "#previousStateId": "{{state.previous.id}}",
                                    "#previousStateName": "{{state.previous.name}}"
                                }
                            }
                        },
                        {
                            "type": "SendMessage",
                            "settings": {
                                "id": "00000000-0000-0000-0000-000000000003",
                                "type": "text/plain",
                                "content": "Desculpe, não consegui entender!",
                                "metadata": {
                                    "#stateName": "{{state.name}}",
                                    "#stateId": "{{state.id}}",
                                    "#messageId": "{{input.message@id}}",
                                    "#previousStateId": "{{state.previous.id}}",
                                    "#previousStateName": "{{state.previous.name}}"
                                }
                            }
                        }
                    ],
                    "input": {
                        "bypass": true
                    },
                    "outputActions": [],
                    "outputs": [
                        {
                            "stateId": "onboarding"
                        }
                    ]
                },
                {
                    "id": "b4d0c77b-8bc9-43c8-988b-0f9c9521d810",
                    "root": false,
                    "name": "Existe Variável",
                    "inputActions": [
                        {
                            "type": "SendMessage",
                            "settings": {
                                "id": "7a83206a-d15a-48da-8916-15f9450f16bd",
                                "type": "application/vnd.lime.chatstate+json",
                                "content": {
                                    "state": "composing",
                                    "interval": 1000
                                },
                                "metadata": {
                                    "#stateName": "{{state.name}}",
                                    "#stateId": "{{state.id}}",
                                    "#messageId": "{{input.message@id}}",
                                    "#previousStateId": "{{state.previous.id}}",
                                    "#previousStateName": "{{state.previous.name}}"
                                }
                            }
                        },
                        {
                            "type": "SendMessage",
                            "settings": {
                                "id": "9156222e-62b8-4f8d-bdb9-9699a493bbc8",
                                "type": "text/plain",
                                "content": "Resultado Script: {{resultado}}",
                                "metadata": {
                                    "#stateName": "{{state.name}}",
                                    "#stateId": "{{state.id}}",
                                    "#messageId": "{{input.message@id}}",
                                    "#previousStateId": "{{state.previous.id}}",
                                    "#previousStateName": "{{state.previous.name}}"
                                }
                            }
                        }
                    ],
                    "input": {
                        "bypass": false
                    },
                    "outputActions": [],
                    "outputs": [
                        {
                            "stateId": "fallback"
                        }
                    ]
                }
            ],
            "configuration": {
                "builder:minimumIntentScore": "0.5",
                "builder:stateTrack": "false",
                "builder:#localTimeZone": "E. South America Standard Time"
            },
            "inputActions": [],
            "outputActions": []
        }
    },
    "settingsType": "BuilderSettings"
}